<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battle Royale - Randomiseur de Plateau</title>
    <style>
        :root {
            --primary: #ff6b35;
            --secondary: #4ecdc4;
            --bg-dark: #1a1a2e;
            --cell-size: 20px;
            --border-color: #333;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #16213e 100%);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            width: 100%;
        }

        h1 {
            font-size: 2.5em;
            text-transform: uppercase;
            background: linear-gradient(45deg, var(--primary), #f7931e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
            padding: 5px 0;
        }

        .main-layout {
            display: flex;
            gap: 30px;
            max-width: 100%;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-start;
        }

        /* --- PANNEAU DE CONTR√îLE --- */
        .controls {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--primary);
            width: 320px;
            min-height: 500px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--secondary);
        }

        .btn {
            width: 100%;
            padding: 14px;
            margin: 10px 0;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-draw { 
            background: linear-gradient(45deg, var(--primary), #ff8e53);
            color: white;
            font-size: 1.2em;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
        }
        .btn-reset { 
            background: linear-gradient(45deg, #666, #444);
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .btn:hover { 
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
        }
        .btn:active { 
            transform: translateY(-1px);
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 25px 0;
            text-align: center;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-box {
            padding: 10px;
        }

        .stat-val { 
            color: var(--secondary); 
            font-size: 2em; 
            font-weight: bold;
            text-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }
        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }

        input[type="number"] {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--secondary);
            border-radius: 8px;
            color: white;
            font-size: 1.1em;
            text-align: center;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
        }

        /* --- PLATEAU DE JEU --- */
        #board-container {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 15px;
            overflow: auto;
            max-height: 80vh;
            min-width: 300px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        #game-board {
            display: grid;
            gap: 1px;
            position: relative;
        }

        .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            border-radius: 3px;
            font-size: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            position: relative;
            cursor: pointer;
        }

        .cell:hover {
            filter: brightness(1.2);
            transform: scale(1.05);
            z-index: 5;
        }

        .cell-empty { 
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Case active (jouable) */
        .cell-active { 
            background: rgba(78, 205, 196, 0.3); 
            border: 1px solid rgba(78, 205, 196, 0.5);
        }

        /* D√©finition des couleurs par type de terrain */
        .terrain--1 { background: rgba(80, 1, 99, 0.69); border: 1px solid rgba(100, 0, 147, 0.641); } /* Vide */
        .terrain-0 { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); } /* Vide */
        .terrain-1 { background: #27ae60; border: 1px solid #2ecc71; } /* Prairie - Vert */
        .terrain-2 { background: #e74c3c; border: 1px solid #c0392b; } /* Montagne - Rouge */
        .terrain-3 { background: #2472a6; border: 1px solid #2472a6; } /* Eau - Bleu */
        .terrain-4 { background: #f39c12; border: 1px solid #f1c40f; } /* D√©sert - Jaune */
        .terrain-5 { background: #035512; border: 1px solid #035512; } /* Foret - vert fonce */
        .terrain-6 { background: #5c5c5c; border: 1px solid #5c5c5c; } /* ville - gris */
        .terrain-7 { background: #4693ff; border: 1px solid #4693ff; } /* Glace - Bleu clair */
        .terrain-8 { background: #57d2ff; border: 1px solid #57d2ff; } /* Glace - bleu tr√®s clair */
        .terrain-9 { background: #e79111; border: 1px solid #e79111; } /* Montagne basse - orange */


        /* Case s√©lectionn√©e */
        .cell-selected {
            background: var(--primary) !important;
            border: 3px solid white !important;
            box-shadow: 0 0 20px var(--primary), 0 0 30px rgba(255, 255, 255, 0.5);
            z-index: 100;
            transform: scale(1.1);
            animation: selectPulse 0.6s ease-out;
            position: relative;
        }

        .cell-selected::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border: 1px solid white;
            border-radius: 3px;
            animation: glow 1.5s infinite;
        }

        @keyframes selectPulse {
            0% { 
                transform: scale(1.8); 
                opacity: 0.7; 
            }
            100% { 
                transform: scale(1.1); 
                opacity: 1; 
            }
        }

        @keyframes glow {
            0%, 100% { 
                box-shadow: 0 0 10px var(--primary); 
            }
            50% { 
                box-shadow: 0 0 20px var(--primary), 0 0 30px var(--primary); 
            }
        }

        /* Journal des tirages */
        #log {
            margin-top: 25px;
            font-size: 0.9em;
            color: #ccc;
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Courier New', monospace;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .coordinate {
            color: var(--secondary);
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .main-layout {
                flex-direction: column;
                align-items: center;
            }
            
            .controls {
                width: 100%;
                max-width: 500px;
            }
            
            :root {
                --cell-size: 16px;
            }
        }

        @media (max-width: 768px) {
            :root {
                --cell-size: 14px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            #board-container {
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            :root {
                --cell-size: 12px;
            }
            
            body {
                padding: 10px;
            }
        }

        /* Scrollbar personnalis√©e */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff8e53;
        }
    </style>
</head>
<body>

    <header>
        <h1>‚öîÔ∏è Kill To Survive¬Æ ‚öîÔ∏è</h1>
        <p style="color: var(--secondary); font-size: 1.2em; margin-top: 5px;">Randomiseur de Plateau KTS¬Æ</p>
    </header>

    <div class="main-layout">
        <div class="controls">
            <div class="control-group">
                <label for="drawCount">Nombre de cases √† tirer :</label>
                <input type="number" id="drawCount" value="1" min="1" max="50">
            </div>
            
            <button class="btn btn-draw" onclick="drawCells()">üé≤ TIRER AU SORT</button>
            <button class="btn btn-reset" onclick="resetGame()">üîÑ REINITIALISER</button>

            <div class="stat-grid">
                <div class="stat-box">
                    <div class="stat-val" id="stat-rem">0</div>
                    <div class="stat-label">Cases restantes</div>
                </div>
                <div class="stat-box">
                    <div class="stat-val" id="stat-drawn">0</div>
                    <div class="stat-label">Cases tir√©es</div>
                </div>
            </div>
            
            <div class="control-group">
                <label>Derniers tirages :</label>
                <div id="log">
                    <!-- Les entr√©es de log seront ajout√©es ici -->
                </div>
            </div>
        </div>

        <div id="board-container">
            <div id="game-board"></div>
        </div>
    </div>

    <script>
        // Donn√©es de la carte (0 = vide, 1 = terrain jouable)
        
        const mapData = [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,9,1,1,1,1,1,9,2,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,9,2,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,5,5,1,1,1,1,9,9,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,1,1,5,5,3,3,3,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,1,1,5,3,3,3,3,1,1,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,1,5,5,5,3,3,5,5,5,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,1,5,5,5,5,5,5,5,5,5,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,-1,-1,0,0,0,1,5,5,5,5,5,5,5,5,1,1,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,3,3,1,1,1,1,1,3,3,1,1,1,1,1,-1,1,1,5,5,5,5,5,5,5,5,5,1,1,1,1,0,0],
            [1,1,1,1,1,1,1,1,1,3,3,3,1,1,9,1,3,3,1,1,1,1,1,1,1,1,5,5,9,2,5,5,5,5,5,1,1,1,1,0,0],
            [1,1,-1,1,1,1,1,1,1,6,6,3,3,1,1,1,3,3,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,5,1,1,1,0,0],
            [1,1,1,1,1,1,1,1,6,6,6,1,3,3,1,1,3,3,1,1,1,1,1,1,1,1,1,5,5,5,5,5,5,5,5,5,1,1,1,0,0],
            [1,1,1,1,1,1,1,1,6,6,6,6,6,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5,5,5,1,1,1,1,0,0],
            [1,1,1,1,1,1,1,1,6,6,6,6,6,6,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,-1,0,0],
            [1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,3,3,3,1,1,1,2,2,1,1,1,1,1,1,1,1,1,1,1,9,1,1,0,0],
            [1,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,3,3,1,1,1,9,2,2,1,1,1,1,1,1,1,1,9,9,2,9,1,0,0],
            [9,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,3,1,1,1,9,9,9,1,1,1,1,1,1,1,9,9,9,2,9,9,9,1],
            [3,9,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,3,3,3,1,1,1,1,1,1,1,1,1,1,1,9,9,2,2,2,2,9,1,1],
            [3,9,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,3,3,1,1,1,1,1,1,1,1,1,1,9,9,9,2,2,2,2,9,1,1],
            [3,9,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,6,3,1,1,1,1,1,1,1,1,1,9,9,9,2,2,2,2,2,9,1,1],
            [9,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,6,3,3,1,1,1,1,1,1,9,9,9,9,9,2,2,2,2,9,1,1,1],
            [1,1,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,6,3,3,1,1,1,1,1,9,9,2,2,2,2,2,2,2,2,9,9,9,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,3,3,3,1,1,1,1,9,2,2,2,2,2,2,2,2,2,2,2,9,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,3,3,3,3,1,1,1,1,9,2,9,2,2,2,2,2,2,2,9,9,9,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,1,1,1,9,2,2,2,2,2,2,2,2,2,9,9,4,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,1,1,9,9,9,4,4,4,4,4,4,4,4,4,4,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,1],
            [1,1,1,0,0,0,0,0,0,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,1,1,1,1,4,4,4,4,4,4,4,4,4,4,-1,4,0],
            [1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0],
            [1,1,1,1,3,3,3,3,3,3,3,3,7,7,3,3,3,3,3,3,3,1,1,1,1,1,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0],
            [1,1,1,3,3,7,7,7,7,7,7,7,7,8,7,3,3,3,3,3,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [1,1,3,7,7,7,8,8,8,8,8,8,8,8,7,3,3,3,3,3,3,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [1,3,3,7,8,8,8,8,8,8,8,8,8,7,7,3,3,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [1,3,7,7,7,8,8,8,8,8,7,7,7,7,3,3,3,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [1,3,7,7,8,8,8,7,7,7,7,3,3,3,3,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [-1,3,3,7,7,7,7,3,3,3,3,3,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [1,3,3,3,3,3,3,3,3,3,3,3,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
];
  
        let availableCells = [];
        let selectedCells = [];
        let totalPlayable = 0;

        // Initialisation du plateau
        function generateBoard() {
            const board = document.getElementById('game-board');
            const rows = mapData.length;
            const cols = mapData[0].length;

            // Param√©trage de la grille
            board.style.gridTemplateColumns = `repeat(${cols}, var(--cell-size))`;
            board.innerHTML = '';
            
            availableCells = [];
            selectedCells = [];
            totalPlayable = 0;

            // Cr√©ation des cases
            for(let r = 0; r < rows; r++) {
                for(let c = 0; c < cols; c++) {
                    const val = mapData[r][c];
                    const cell = document.createElement('div');
                    cell.id = `cell-${r}-${c}`;
                    cell.className = `cell terrain-${val}`;
                    cell.title = `Ligne ${r+1}, Colonne ${c+1}`;
                    
                    if(val > 0) {
                        cell.classList.add('cell-active');
                        availableCells.push({ 
                            id: cell.id, 
                            row: r, 
                            col: c, 
                            element: cell,
                            coord: getCoordinate(r, c)
                        });
                        totalPlayable++;
                    }
                    
                    board.appendChild(cell);
                }
            }
            
            updateStats();
        }

        // Convertir les coordonn√©es en format A1, B2, etc.
        function getCoordinate(row, col) {
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            let colName = '';
            
            // Convertir la colonne en lettres (A, B, ... Z, AA, AB, etc.)
            col++;
            while (col > 0) {
                col--;
                colName = letters[col % 26] + colName;
                col = Math.floor(col / 26);
            }
            
            return colName + (row + 1);
        }

        // Tirage al√©atoire des cases
        function drawCells() {
            const drawCount = parseInt(document.getElementById('drawCount').value);
            const log = document.getElementById('log');
            let drawnThisTurn = [];
            
            // Validation
            if (isNaN(drawCount) || drawCount < 1) {
                alert("Veuillez entrer un nombre valide de cases √† tirer");
                return;
            }
            
            if (drawCount > availableCells.length) {
                alert(`Il ne reste que ${availableCells.length} cases disponibles !`);
                return;
            }
            
            // Tirage des cases
            for(let i = 0; i < drawCount; i++) {
                if(availableCells.length === 0) break;
                
                const index = Math.floor(Math.random() * availableCells.length);
                const selected = availableCells.splice(index, 1)[0];
                selectedCells.push(selected);
                
                // Animation et style
                selected.element.classList.add('cell-selected');
                selected.element.classList.remove('cell-active');
                
                drawnThisTurn.push(selected.coord);
                
                // Petite animation s√©quentielle
                setTimeout(() => {
                    selected.element.style.animation = 'selectPulse 0.6s ease-out';
                }, i * 100);
            }
            
            // Mise √† jour des statistiques
            updateStats();
            
            // Ajout au journal
            if (drawnThisTurn.length > 0) {
                const now = new Date();
                const timeStr = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                
                if (drawnThisTurn.length === 1) {
                    logEntry.innerHTML = `[${timeStr}] Case <span class="coordinate">${drawnThisTurn[0]}</span> tir√©e`;
                } else {
                    logEntry.innerHTML = `[${timeStr}] ${drawnThisTurn.length} cases tir√©es : <span class="coordinate">${drawnThisTurn.join(', ')}</span>`;
                }
                
                log.insertBefore(logEntry, log.firstChild);
                
                // Limiter le journal √† 50 entr√©es
                while (log.children.length > 50) {
                    log.removeChild(log.lastChild);
                }
            }
            
            // Feedback sonore (optionnel)
            playDrawSound();
        }

        // R√©initialiser le jeu
        function resetGame() {
            if (selectedCells.length === 0) return;
            
            if (confirm("Voulez-vous vraiment r√©initialiser toutes les cases s√©lectionn√©es ?")) {
                // R√©int√©grer toutes les cases s√©lectionn√©es dans les disponibles
                selectedCells.forEach(cell => {
                    cell.element.classList.remove('cell-selected');
                    cell.element.classList.add('cell-active');
                    availableCells.push(cell);
                });
                
                selectedCells = [];
                updateStats();
                
                // Vider le journal
                document.getElementById('log').innerHTML = '<div class="log-entry">Journal r√©initialis√©</div>';
                
                playResetSound();
            }
        }

        // Mettre √† jour les statistiques
        function updateStats() {
            document.getElementById('stat-rem').textContent = availableCells.length;
            document.getElementById('stat-drawn').textContent = selectedCells.length;
        }

        // Sons (optionnels)
        function playDrawSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                // Audio non support√©, continuer silencieusement
            }
        }

        function playResetSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 400;
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                // Audio non support√©, continuer silencieusement
            }
        }

        // Exporter la liste des cases s√©lectionn√©es
        function exportSelection() {
            if (selectedCells.length === 0) {
                alert("Aucune case s√©lectionn√©e √† exporter");
                return;
            }
            
            const coordinates = selectedCells.map(cell => cell.coord).join('\n');
            const blob = new Blob([coordinates], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            a.href = url;
            a.download = `kts-selection-${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Lancement automatique au chargement
        window.addEventListener('DOMContentLoaded', () => {
            generateBoard();
            // Ajouter le bouton d'export si besoin
            const controls = document.querySelector('.controls');
            const exportBtn = document.createElement('button');
            exportBtn.className = 'btn btn-reset';
            exportBtn.innerHTML = 'üíæ EXPORTER SELECTION';
            exportBtn.onclick = exportSelection;
            controls.appendChild(exportBtn);
        });

        // Raccourcis clavier
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ' || e.key === 'Enter') {
                e.preventDefault();
                drawCells();
            } else if (e.key === 'Escape' || e.key === 'r') {
                if (e.ctrlKey) resetGame();
            }
        });
    </script>
</body>
</html>
